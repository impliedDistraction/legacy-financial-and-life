---
import Base from '../layouts/Base.astro';
import Header from '../components/Header.astro';
import EventRSVP from '../components/EventRSVP.astro';
import Footer from '../components/Footer.astro';
import Map from '../components/Map.astro';
import { site } from '../content/site';
import '../styles/tailwind.css';
---

<Base 
  title={`${site.event.title} Event RSVP ‚Äî Legacy Financial & Life`}
  description={`RSVP for ${site.event.title} seminar with Tim and Beth Byrd. Join us for this free educational event on estate planning and protecting your family's future.`}
>
  <Header />
  
  <!-- Event Hero Section -->
  <section class="relative isolate overflow-hidden bg-gradient-to-br from-brand-50 to-white py-16 sm:py-20">
    <div class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80" aria-hidden="true">
      <div class="relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-brand-200 to-brand-400 opacity-20 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]"></div>
    </div>
    
    <div class="mx-auto max-w-6xl px-2 sm:px-4 text-center">
      <div class="animate-fade-in-up">
        <div class="inline-block bg-brand-100 text-brand-800 text-sm font-medium px-4 py-2 rounded-full mb-6">
          üéì {site.event.subtitle}
        </div>
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-slate-900 mb-6">
          {site.event.title}
        </h1>
        <p class="text-lg text-slate-600 mb-2">Newnan, GA</p>
        <p class="text-xl text-slate-700 mb-8 max-w-2xl mx-auto">
          {site.event.description}
        </p>
        
        <!-- Available Events Grid -->
        <div class="bg-white rounded-2xl border border-slate-200 p-4 sm:p-6 shadow-lg mb-8 max-w-5xl mx-auto">
          <h3 class="text-lg font-semibold mb-6 text-slate-900">Available Events</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4">
            {site.event.sessions.map((session) => (
              <button 
                type="button"
                onclick={`selectEventSession('${session.value}')`}
                class="event-session-btn bg-slate-50 rounded-lg p-4 border border-slate-200 hover:border-brand-300 hover:bg-brand-50 transition-all duration-200 hover-lift cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-500"
              >
                <div class="text-center">
                  <div class="text-brand-600 font-semibold text-sm uppercase tracking-wide">{session.day}</div>
                  <div class="text-slate-900 font-bold text-lg">{session.date}</div>
                  <div class="text-slate-700 font-medium">{session.time}</div>
                </div>
              </button>
            ))}
          </div>
          
          <!-- Location Info -->
          <div class="mt-6 pt-6 border-t border-slate-200">
            <div class="text-center">
              <div class="text-brand-600 font-semibold text-sm uppercase tracking-wide">Location</div>
              <div class="text-slate-900 font-bold text-lg">{site.event.location.name}</div>
              <div class="text-slate-700">{site.event.location.fullAddress}</div>
            </div>
          </div>
        </div>

        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="#event-rsvp" 
            class="rounded-lg bg-brand-600 hover:bg-brand-700 text-white px-8 py-4 text-lg font-semibold btn-animate hover-lift"
          >
            {site.event.callToAction}
          </a>
          <a 
            href="#event-details" 
            class="rounded-lg border border-brand-600 text-brand-600 hover:bg-brand-50 px-8 py-4 text-lg font-semibold transition-colors"
          >
            Learn More
          </a>
        </div>
      </div>
    </div>
    
    <div class="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]" aria-hidden="true">
      <div class="relative left-[calc(50%+3rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 bg-gradient-to-tr from-brand-200 to-brand-400 opacity-20 sm:w-[72.1875rem]"></div>
    </div>
  </section>

  <!-- Event Details Section -->
  <section id="event-details" class="mx-auto max-w-6xl px-2 sm:px-4 py-12 sm:py-16">
    <div class="text-center mb-12">
      <h2 class="text-3xl sm:text-4xl font-bold mb-4">What You'll Learn</h2>
      <p class="text-xl text-slate-700 max-w-4xl mx-auto mb-6">
        An Estate Plan is vital for any individual, couple, or family that owns a home and has assets. Ensure that your Estate Planning is in good order by reviewing the methods families use to avoid the most common costly mistakes. We'll cover the following topics, in easy to understand terms:
      </p>
    </div>

    <!-- Topics Grid -->
    <div class="grid md:grid-cols-1 gap-4 mb-12">
      {site.event.topics.map((topic) => (
        <div class="bg-white rounded-xl border border-slate-200 p-4 hover-lift">
          <div class="flex items-start space-x-3">
            <div class="flex-shrink-0 w-6 h-6 bg-brand-500 rounded-full flex items-center justify-center mt-1">
              <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
              </svg>
            </div>
            <p class="text-slate-700 font-medium text-lg leading-relaxed">{topic}</p>
          </div>
        </div>
      ))}
    </div>

    <!-- Why Attend Section -->
    <div class="bg-slate-50 rounded-2xl p-8 sm:p-12">
      <div class="text-center mb-8">
        <h3 class="text-2xl sm:text-3xl font-bold mb-4">Why Attend This Event?</h3>
        <p class="text-lg text-slate-700">
          Get expert insights from experienced professionals and take control of your family's financial future.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        {site.event.benefits.map((benefit) => (
          <div class="flex items-start space-x-3">
            <div class="flex-shrink-0 w-6 h-6 bg-brand-500 rounded-full flex items-center justify-center mt-0.5">
              <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
              </svg>
            </div>
            <p class="text-slate-700 font-medium">{benefit}</p>
          </div>
        ))}
      </div>
      
      <!-- Event Notes -->
      <div class="mt-8 pt-8 border-t border-slate-200">
        <div class="grid sm:grid-cols-2 gap-4 text-center">
          <div class="bg-white rounded-lg p-4 border border-slate-200">
            <p class="text-slate-700 font-medium">Be our guest at this unique and <span class="text-brand-600 font-bold">FREE</span> educational event.</p>
          </div>
          <div class="bg-white rounded-lg p-4 border border-slate-200">
            <p class="text-slate-700 font-medium">If married, spouses are encouraged to attend. <span class="text-slate-600">Adults only.</span></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Hosts Section -->
  <section class="mx-auto max-w-6xl px-2 sm:px-4 py-12 sm:py-16 bg-white">
    <div class="text-center mb-12">
      <h2 class="text-3xl sm:text-4xl font-bold mb-4">Get to Know Your Hosts</h2>
      <p class="text-xl text-slate-700 max-w-3xl mx-auto">
        Learn from experienced professionals who specialize in estate planning, financial strategies, and protecting your family's future.
      </p>
    </div>

    <div class="space-y-12">
      {site.event.hosts.map((host, index) => {
        // Map speaker names to their image files with proper names in alt text
        const speakerImages = {
          'Tim & Beth Byrd': {
            file: 'LYFL_Tim_and_Beth_Bryd_2025-09-11.jpeg',
            alt: 'Tim & Beth Byrd - Event Hosts',
            title: 'Tim & Beth Byrd'
          },
          'Mike Morice': {
            file: 'LYFL_Mike_Morice_2025-09-11.jpg', 
            alt: 'Mike Morice - Event Speaker',
            title: 'Mike Morice'
          },
          'Mo Dadkhah': {
            file: 'LYFL_Mo_Dadkhah_2025-09-11.jpg',
            alt: 'Mo Dadkhah - Event Speaker', 
            title: 'Mo Dadkhah'
          }
        };
        const speakerImage = speakerImages[host.name];
        
        return (
          <div class={`bg-gradient-to-br ${index % 2 === 0 ? 'from-brand-50 to-white' : 'from-slate-50 to-white'} rounded-2xl border border-slate-200 p-4 sm:p-8 lg:p-12`}>
            <div class="grid lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 items-start">
              <div class="lg:col-span-2">
                <h3 class="text-2xl font-bold mb-4 text-slate-900">{host.name}</h3>
                <div class="space-y-4 text-slate-700">
                  <p class="text-lg leading-relaxed">
                    {host.description}
                  </p>
                  <div class="grid sm:grid-cols-2 gap-3 pt-4">
                    {host.credentials.map((credential) => (
                      <div class="flex items-center space-x-2">
                        <span class="w-2 h-2 bg-brand-500 rounded-full flex-shrink-0"></span>
                        <span class="text-sm font-medium">{credential}</span>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
              <div class="text-center lg:text-right">
                <div class="inline-block bg-white rounded-xl p-4 shadow-lg">
                  {speakerImage ? (
                    <img 
                      src={`/images/${speakerImage.file}`}
                      alt={speakerImage.alt}
                      title={speakerImage.title}
                      class="w-48 h-48 object-cover rounded-lg mx-auto"
                      loading="lazy"
                    />
                  ) : (
                    <div class="w-48 h-48 bg-slate-200 rounded-lg flex items-center justify-center mx-auto">
                      <div class="text-slate-500 text-center">
                        <svg class="w-16 h-16 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <p class="text-sm font-medium">{host.name}</p>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      })}
    </div>
  </section>

  <!-- RSVP Section -->
  <EventRSVP />

  <!-- Directions Section -->
  <section class="mx-auto max-w-4xl px-2 sm:px-4 py-12">
    <div class="text-center mb-8">
      <h2 class="text-2xl sm:text-3xl font-bold mb-4">Directions</h2>
      <p class="text-lg text-slate-600 max-w-2xl mx-auto">
        Get directions to {site.event.location.name} for the Wills & Living Trusts educational event. 
        Choose your preferred navigation app or view the interactive map below.
      </p>
    </div>
    
    <div class="bg-white rounded-2xl border border-slate-200 p-4 sm:p-6 lg:p-8 shadow-lg">
      <!-- Interactive Map Component -->
      <Map 
        location={site.event.location} 
        height="400px"
        showDirectionsLinks={true}
        className="mb-6"
      />
      
      <!-- Additional Venue Information -->
      <div class="grid md:grid-cols-2 gap-6 mt-8 pt-6 border-t border-slate-200">
        <div class="text-center md:text-left">
          <h4 class="font-semibold text-slate-900 mb-2">üìç Location Details</h4>
          <div class="space-y-1 text-sm text-slate-600">
            <p><strong>Address:</strong> {site.event.location.fullAddress}</p>
            {site.event.location.phone && (
              <p><strong>Phone:</strong> 
                <a href={`tel:${site.event.location.phone}`} class="text-brand-600 hover:text-brand-700">
                  {site.event.location.phone}
                </a>
              </p>
            )}
            {site.event.location.parkingInfo && (
              <p><strong>Parking:</strong> {site.event.location.parkingInfo}</p>
            )}
          </div>
        </div>
        
        <div class="text-center md:text-left">
          <h4 class="font-semibold text-slate-900 mb-2">‚ÑπÔ∏è Event Information</h4>
          <div class="space-y-1 text-sm text-slate-600">
            <p><strong>Event:</strong> {site.event.title}</p>
            <p><strong>Host:</strong> Legacy Financial & Life</p>
            <p><strong>Cost:</strong> FREE Educational Event</p>
            {site.event.location.notes && (
              <p><strong>Note:</strong> {site.event.location.notes}</p>
            )}
          </div>
        </div>
      </div>

      <!-- Quick Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-3 mt-6 pt-6 border-t border-slate-200">
        <a 
          href="#event-rsvp" 
          class="flex-1 bg-brand-600 hover:bg-brand-700 text-white py-3 px-4 rounded-lg font-medium text-center transition-colors"
        >
          üéüÔ∏è RSVP for Event
        </a>
        <a 
          href={`tel:${site.phone}`}
          class="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-900 py-3 px-4 rounded-lg font-medium text-center transition-colors"
        >
          üìû Call for Questions
        </a>
      </div>
    </div>
  </section>

  <!-- Disclaimers Section -->
  <section class="mx-auto max-w-4xl px-2 sm:px-4 py-8">
    <div class="bg-amber-50 border border-amber-200 rounded-lg p-6">
      <div class="space-y-3">
        {site.event.disclaimers.map((disclaimer) => (
          <p class="text-amber-800 text-sm text-center">{disclaimer}</p>
        ))}
      </div>
    </div>
  </section>

  <!-- Contact Information -->
  <section class="mx-auto max-w-4xl px-2 sm:px-4 py-12 text-center">
    <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
      <h3 class="text-lg font-semibold text-slate-900 mb-2">Questions About the Event?</h3>
      <p class="text-slate-700 mb-4">
        Contact Tim and Beth directly for more information about this educational seminar.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href={`tel:${site.phone}`} 
          class="inline-flex items-center justify-center gap-2 text-slate-900 hover:text-slate-700 font-medium"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
          </svg>
          {site.phone}
        </a>
        <a 
          href={`mailto:${site.email}`} 
          class="inline-flex items-center justify-center gap-2 text-slate-900 hover:text-slate-700 font-medium"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
          </svg>
          {site.email}
        </a>
      </div>
    </div>
  </section>

  <Footer />
</Base>

<script>
  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });

  // Function to select event session and scroll to form
  function selectEventSession(sessionValue) {
    // Scroll to the RSVP form
    const rsvpSection = document.querySelector('#event-rsvp');
    if (rsvpSection) {
      rsvpSection.scrollIntoView({ behavior: 'smooth' });
    }
    
    // Pre-select the session in the form after a short delay for scrolling
    setTimeout(() => {
      const sessionSelect = document.querySelector('select[name="event_session"]');
      if (sessionSelect) {
        sessionSelect.value = sessionValue;
        // Trigger change event in case there are any listeners
        sessionSelect.dispatchEvent(new Event('change', { bubbles: true }));
        
        // Add visual feedback
        sessionSelect.style.background = '#eff6ff';
        setTimeout(() => {
          sessionSelect.style.background = '';
        }, 2000);
      }
    }, 500);
  }

  // Make function globally available
  window.selectEventSession = selectEventSession;

  // Track event page view
  if (typeof gtag !== 'undefined') {
    gtag('event', 'page_view', {
      'event_category': 'engagement',
      'event_label': 'rsvp_page'
    });
  }
</script>